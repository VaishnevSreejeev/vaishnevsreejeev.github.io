// script.js
document.addEventListener('DOMContentLoaded', () => {
    const pages = document.querySelectorAll('.page');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    // --- Page Navigation Logic ---
    // This function handles showing and hiding the correct page divs.
    window.navigateTo = function(pageId, anchor = null) {
        // Hide all pages
        pages.forEach(page => page.classList.remove('active'));
        
        // Show the target page
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
            targetPage.classList.add('active');
        }

        // Handle scrolling to a specific section (anchor) if provided
        if (anchor) {
            const anchorElement = document.querySelector(anchor);
            if (anchorElement) {
                anchorElement.scrollIntoView({ behavior: 'smooth' });
            }
        } else {
            // Otherwise, scroll to the top of the new page
            window.scrollTo(0, 0);
        }

        // Always close mobile menu after a navigation action
        mobileMenu.classList.add('hidden');
    }

    // --- Scroll Animation Logic ---
    // This function adds the 'active' class to elements with the 'reveal' class
    // when they scroll into the viewport.
    const revealOnScroll = () => {
        const revealElements = document.querySelectorAll('.reveal');
        const windowHeight = window.innerHeight;
        revealElements.forEach(el => {
            // Check if the element is currently visible on the page
            if (el.offsetParent !== null) {
                const elementTop = el.getBoundingClientRect().top;
                if (elementTop < windowHeight - 100) {
                    el.classList.add('active');
                }
            }
        });
    };
    window.addEventListener('scroll', revealOnScroll);
    
    // Initial check to reveal elements already in view on load
    setTimeout(revealOnScroll, 100);

    // --- Mobile Menu Toggle ---
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Add event listeners to mobile menu links to handle navigation
    document.querySelectorAll('.mobile-nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
            if (link.getAttribute('href').startsWith('#')) {
                e.preventDefault(); // Prevent default anchor jump
                const pageId = 'home-page'; // Assume all anchor links are on the home page
                const anchor = link.getAttribute('href');
                navigateTo(pageId, anchor);
            }
        });
    });
});
